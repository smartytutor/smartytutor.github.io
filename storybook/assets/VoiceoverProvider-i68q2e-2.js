import{j as C}from"./jsx-runtime-DR9Q75dM.js";import{r as t}from"./index-DRjF_FHU.js";const P=t.createContext(null),b=({children:f})=>{const[p,l]=t.useState(null),[m,o]=t.useState(!1),[E,r]=t.useState(!1),[x,a]=t.useState(null),n=t.useRef(null),s=t.useCallback(()=>{n.current&&(n.current.pause(),n.current.currentTime=0),l(null),o(!1),r(!1),a(null)},[]),y=t.useCallback(async(c,V=!0)=>{s();const e=new Audio(c);return n.current=e,l(c),r(V),o(!0),new Promise((h,k)=>{const u=()=>{a(e.duration*1e3)},i=()=>{o(!1),r(!1),v(),h()},d=()=>{const A=new Error(`Audio loading failed: ${c}`);o(!1),r(!1),a(null),v(),k(A)},v=()=>{e.removeEventListener("loadedmetadata",u),e.removeEventListener("ended",i),e.removeEventListener("error",d)};e.addEventListener("loadedmetadata",u),e.addEventListener("ended",i),e.addEventListener("error",d),e.play().catch(d)})},[s]),L=t.useCallback(()=>{r(!1)},[]),R={currentAudio:p,isPlaying:m,isBlocked:E,audioDuration:x,playVoiceover:y,stopVoiceover:s,unblock:L};return C.jsx(P.Provider,{value:R,children:f})};b.__docgenInfo={description:"",methods:[],displayName:"VoiceoverProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{b as V,P as a};

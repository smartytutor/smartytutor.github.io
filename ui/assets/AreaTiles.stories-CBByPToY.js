import{j as r}from"./jsx-runtime-DR9Q75dM.js";import"./Action-DQ72ZiUY.js";import"./Answer-CpHO1qYv.js";import"./Button-CGecWSMn.js";import"./Chat-CUlhg49f.js";import"./Icon-DNOHRIBS.js";import"./Input-0sRJfh9S.js";import{r as x}from"./index-DRjF_FHU.js";import"./Menu-DuHofHgY.js";import"./Message-ByLECGpj.js";import"./ProgressBar-Dhx3fOxm.js";import"./Smartik-Dty5hFjB.js";import{a as _}from"./UnsupportedResolution-BewuEFEY.js";import w from"./Chat.stories-lQbS4D1C.js";import{Default as D}from"./ProgressBar.stories-DVUOzv-A.js";import{n as I}from"./redux-toolkit.modern-DEr0YuQG.js";import{u as R,a as h,b as z}from"./index-B_WByVEu.js";import"./VoiceoverProvider-i68q2e-2.js";import{u as C}from"./useImagePreloader-DoLrgOXj.js";import{g as M,A as N,S as B}from"./Slot-CHJWOlzR.js";import{l as O,p as Z,s as k,t as U}from"./Module-CFFiIc3r.js";import{l as $,D as X,A as q,T as j}from"./Lot-roopd1dj.js";import{D as F}from"./DraggableLot-B6dhd889.js";import{L as G}from"./LotPicker-D3v_cDCG.js";import{L as H}from"./LotPalette-iXVOjR9-.js";import{T as A,P as J}from"./constants-K3C4fZDC.js";import"./clsx-B-dksMZM.js";import"./proxy-C00yw4cG.js";import"./Deck-DfwvEkP6.js";import"./AnimatedCard-B5OiutWw.js";import"./NumeralFace-4quTT4Vb.js";import"./_arrayLikeKeys-CNLEhIRO.js";import"./DraggableToken-b_ObY-35.js";import"./Sign-CY00udov.js";import"./defaults-DIlqC9Zn.js";import"./Token-CYgrhBmq.js";import"./Highlighted-6-cdO6i-.js";import"./Stack-5l1yl6MK.js";const y=""+new URL("bg-D4XBaLZf.jpg",import.meta.url).href,K=Object.freeze(Object.defineProperty({__proto__:null,bg:y,ground:M,living:O,lot:$,platform:Z,science:k,transport:U},Symbol.toStringTag,{value:"Module"})),E=()=>{const a=R();C(K);const p=x.useRef(null),i=x.useRef(null),l=h(e=>e.AreaTiles.size),m=h(e=>e.AreaTiles.lots),L=(e,{point:o})=>{var f;if(!i.current)return!1;const c=(f=e.target.parentElement)==null?void 0:f.closest("[id]");if(!c)return!1;const t=i.current.getBoundingClientRect();if(o.x<t.left||o.x>t.right||o.y<t.top||o.y>t.bottom)return!1;const P=o.x-t.left,S=o.y-t.top,n={row:Math.floor(S/t.height*l.row),col:Math.floor(P/t.width*l.col)};return m.find(d=>{var u,g;return((u=d.position)==null?void 0:u.row)===n.row&&((g=d.position)==null?void 0:g.col)===n.col})?!1:(a(z.placeLot({lotId:c.id,position:n})),!0)};return r.jsx(X.Provider,{value:{dragConstraints:p,onDragEnd:L},children:r.jsxs("div",{className:"mx-8 my-20 flex flex-1 items-center justify-center self-stretch",ref:p,children:[r.jsx(q.Provider,{value:{size:l,tile:A},children:r.jsx(j.Provider,{value:A,children:r.jsx(N,{ref:i,children:m.filter(e=>e.position).map(e=>r.jsx(B,{position:e.position,children:r.jsx(F,{...e,drag:!0})},I(4)))})})}),r.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:r.jsx(j.Provider,{value:J,children:r.jsx(H,{children:r.jsx(G,{lots:m.filter(e=>!e.position)})})})})]})})};E.__docgenInfo={description:"",methods:[],displayName:"AreaTiles"};const Cr={title:"Тренажёры/AreaTiles/AreaTiles",component:E,parameters:{layout:"fullscreen",store:{tutor:{styles:{background:{src:y,className:"object-center 2xl:-left-[10vw] 2xl:w-[110vw]"}}}}},tags:["!autodocs"],decorators:a=>r.jsx(_,{chat:{messages:w.args.messages},progressBar:D.args,children:r.jsx(a,{})})},s={};var T,v,b;s.parameters={...s.parameters,docs:{...(T=s.parameters)==null?void 0:T.docs,source:{originalSource:"{}",...(b=(v=s.parameters)==null?void 0:v.docs)==null?void 0:b.source}}};const Mr=["AreaTiles"];export{s as AreaTiles,Mr as __namedExportsOrder,Cr as default};

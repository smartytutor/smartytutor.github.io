import{j as r}from"./jsx-runtime-DR9Q75dM.js";import"./Action-DQ72ZiUY.js";import"./Answer-CpHO1qYv.js";import"./Button-CGecWSMn.js";import"./Chat-CUlhg49f.js";import"./Icon-DNOHRIBS.js";import"./Input-0sRJfh9S.js";import{r as g}from"./index-DRjF_FHU.js";import"./Menu-DuHofHgY.js";import"./Message-ByLECGpj.js";import"./ProgressBar-Dhx3fOxm.js";import"./Smartik-Bonj4xt4.js";import{U as D}from"./SideSlide-BXjFkal0.js";import P from"./Chat.stories-lQbS4D1C.js";import{Default as S}from"./ProgressBar.stories-DVUOzv-A.js";import{n as R}from"./redux-toolkit.modern-DEr0YuQG.js";import{u as I,a as h,b as _}from"./index-BM9kYpov.js";import{A as C,S as z}from"./Slot-CeyB4LO3.js";import{D as N}from"./DraggableLot-BJjizABH.js";import{D as B,A as U,T as j}from"./Lot-roopd1dj.js";import{L as Z}from"./LotPicker-VZfyvHwq.js";import{L as k}from"./LotPalette-iXVOjR9-.js";import"./Module-BA0KcUad.js";import{T as A,P as M}from"./constants-K3C4fZDC.js";import"./clsx-B-dksMZM.js";import"./proxy-C00yw4cG.js";import"./VoiceoverProvider-i68q2e-2.js";import"./Deck-DCC2Jsd6.js";import"./AnimatedCard-BBj7EPCy.js";import"./NumeralFace-CXEVFjF1.js";import"./_arrayLikeKeys-BOaknIRz.js";import"./defaults-BleV3Q12.js";import"./keysIn-Bb7DVGF9.js";import"./Stack-5l1yl6MK.js";const $=""+new URL("bg-D4XBaLZf.jpg",import.meta.url).href,b=()=>{const i=I(),c=g.useRef(null),a=g.useRef(null),l=h(e=>e.AreaTiles.size),n=h(e=>e.AreaTiles.lots),L=(e,{point:o})=>{var f;if(!a.current)return!1;const p=(f=e.target.parentElement)==null?void 0:f.closest("[id]");if(!p)return!1;const t=a.current.getBoundingClientRect();if(o.x<t.left||o.x>t.right||o.y<t.top||o.y>t.bottom)return!1;const w=o.x-t.left,y=o.y-t.top,m={row:Math.floor(y/t.height*l.row),col:Math.floor(w/t.width*l.col)};return n.find(d=>{var u,x;return((u=d.position)==null?void 0:u.row)===m.row&&((x=d.position)==null?void 0:x.col)===m.col})?!1:(i(_.placeLot({lotId:p.id,position:m})),!0)};return r.jsx(B.Provider,{value:{dragConstraints:c,onDragEnd:L},children:r.jsxs("div",{className:"mx-8 my-20 flex flex-1 items-center justify-center self-stretch",ref:c,children:[r.jsx(U.Provider,{value:{size:l,tile:A},children:r.jsx(j.Provider,{value:A,children:r.jsx(C,{ref:a,children:n.filter(e=>e.position).map(e=>r.jsx(z,{position:e.position,children:r.jsx(N,{...e,drag:!0})},R(4)))})})}),r.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:r.jsx(j.Provider,{value:M,children:r.jsx(k,{children:r.jsx(Z,{lots:n.filter(e=>!e.position)})})})})]})})};b.__docgenInfo={description:"",methods:[],displayName:"AreaTiles"};const Er={title:"Тренажёры/AreaTiles/AreaTiles",component:b,parameters:{layout:"fullscreen",store:{tutor:{styles:{background:{src:$,className:"object-center 2xl:-left-[10vw] 2xl:w-[110vw]"}}}}},tags:["!autodocs"],decorators:i=>r.jsx(D,{chat:{messages:P.args.messages},progressBar:S.args,children:r.jsx(i,{})})},s={};var T,v,E;s.parameters={...s.parameters,docs:{...(T=s.parameters)==null?void 0:T.docs,source:{originalSource:"{}",...(E=(v=s.parameters)==null?void 0:v.docs)==null?void 0:E.source}}};const br=["AreaTiles"];export{s as AreaTiles,br as __namedExportsOrder,Er as default};

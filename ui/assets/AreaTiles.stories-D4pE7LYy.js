import{j as r}from"./jsx-runtime-CkxqCPlQ.js";import{u as S,a as h,b as w,P as y,p as R,U as _}from"./UI-DXOvvX5q.js";import"./Action-DcFBsC7h.js";import"./Answer-BBzPdijR.js";import"./Button-BFim8KLb.js";import"./Chat-DbB_edh2.js";import"./Icon-CA65L85m.js";import"./Input-CtlMo02g.js";import"./Menu-C_SWLeMl.js";import"./Message-B84R2Yj4.js";import"./ProgressBar-DvhAnra0.js";import"./Smartik-rCPOZ_vc.js";import I from"./Chat.stories-mvVQXxcb.js";import{Default as C}from"./ProgressBar.stories-Dg9lHho7.js";import{n as z}from"./redux-toolkit.modern-DEr0YuQG.js";import{r as g}from"./index-DJO9vBfz.js";import{A as N,S as B}from"./Slot-ChBACgiG.js";import{D as U}from"./DraggableLot-DF6mInX7.js";import{D as Z,A as k,T as j}from"./Lot-DGxgJcX-.js";import{L as M}from"./LotPicker-CACTe6AY.js";import{L as $}from"./LotPalette-B9KzEXUe.js";import"./Module-DRlgpyBQ.js";import{T as A,P as O}from"./constants-DncXPzQH.js";import"./clsx-B-dksMZM.js";import"./_arrayLikeKeys-CtZSz9VC.js";import"./proxy-Bu-Muats.js";import"./defaults-DX0nfFOI.js";import"./Stack-BknSO6jY.js";const X=""+new URL("bg-D4XBaLZf.jpg",import.meta.url).href,L=()=>{const a=S(),c=g.useRef(null),i=g.useRef(null),l=h(e=>e.AreaTiles.size),n=h(e=>e.AreaTiles.lots),P=(e,{point:o})=>{var d;if(!i.current)return!1;const p=(d=e.target.parentElement)==null?void 0:d.closest("[id]");if(!p)return!1;const t=i.current.getBoundingClientRect();if(o.x<t.left||o.x>t.right||o.y<t.top||o.y>t.bottom)return!1;const b=o.x-t.left,D=o.y-t.top,m={row:Math.floor(D/t.height*l.row),col:Math.floor(b/t.width*l.col)};return n.find(f=>{var u,x;return((u=f.position)==null?void 0:u.row)===m.row&&((x=f.position)==null?void 0:x.col)===m.col})?!1:(a(w.placeLot({lotId:p.id,position:m})),!0)};return r.jsx(Z.Provider,{value:{dragConstraints:c,onDragEnd:P},children:r.jsxs("div",{className:"mx-8 my-20 flex flex-1 items-center justify-center self-stretch",ref:c,children:[r.jsx(k.Provider,{value:{size:l,tile:A},children:r.jsx(j.Provider,{value:A,children:r.jsx(N,{ref:i,children:n.filter(e=>e.position).map(e=>r.jsx(B,{position:e.position,children:r.jsx(U,{...e,drag:!0})},z(4)))})})}),r.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:r.jsx(j.Provider,{value:O,children:r.jsx($,{children:r.jsx(M,{lots:n.filter(e=>!e.position)})})})})]})})};L.__docgenInfo={description:"",methods:[],displayName:"AreaTiles"};const jr={title:"AreaTiles/AreaTiles",component:L,tags:["!autodocs"],decorators:a=>r.jsx(y,{store:R({tutor:{styles:{background:{src:X}}}}),children:r.jsx("div",{className:"h-[657px] w-[1280px] shadow-2xl",children:r.jsx(_,{chat:{messages:I.args.messages},progressBar:C.args,children:r.jsx(a,{})})})})},s={};var T,v,E;s.parameters={...s.parameters,docs:{...(T=s.parameters)==null?void 0:T.docs,source:{originalSource:"{}",...(E=(v=s.parameters)==null?void 0:v.docs)==null?void 0:E.source}}};const Ar=["AreaTiles"];export{s as AreaTiles,Ar as __namedExportsOrder,jr as default};

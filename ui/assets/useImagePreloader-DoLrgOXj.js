import{r as n}from"./index-DRjF_FHU.js";function i(o){const r=new Set;return Object.values(o).forEach(e=>{if(e.type==="comics"&&e.slides&&e.slides.forEach(a=>{a.image&&r.add(a.image)}),e.type==="sticker"&&e.url&&r.add(e.url),e.type==="showMeme"&&e.url&&r.add(e.url),e.type==="attachInteractive"&&e.props){const a=e.props;typeof a.backgroundImage=="string"&&r.add(a.backgroundImage)}}),Array.from(r)}const d=new Set;function u(o=[],r=!0){const e=n.useRef([]);n.useEffect(()=>{if(!r||o.length===0)return;const a=o.filter(t=>!d.has(t));if(a.length===0)return;const s=a.map(t=>{const c=document.createElement("link");return c.rel="preload",c.as="image",c.href=t,c}),l=document.head;return s.forEach(t=>{l.appendChild(t)}),a.forEach(t=>d.add(t)),e.current=s,console.log(`🖼️ Preloading ${a.length} new images (${o.length-a.length} already cached):`,a),()=>{e.current.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),e.current=[]}},[o,r])}function p(o={},r=!0){const e=Object.values(o);u(e,r)}function g(o=null,r=!0){const e=o?i(o):[];u(e,r)}export{g as a,p as u};

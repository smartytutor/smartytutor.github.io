import{j as e}from"./jsx-runtime-CkxqCPlQ.js";import{u as v,a as R,b as M,P as T,p as _,U as b}from"./UI-zfq67HMr.js";import"./Action-DcFBsC7h.js";import"./Answer-BBzPdijR.js";import"./Button-BFim8KLb.js";import"./Chat-DbB_edh2.js";import"./Icon-CA65L85m.js";import"./Input-CtlMo02g.js";import"./Menu-C_SWLeMl.js";import"./Message-B84R2Yj4.js";import"./ProgressBar-DvhAnra0.js";import"./Smartik-rCPOZ_vc.js";import w from"./Chat.stories-mvVQXxcb.js";import{Default as C}from"./ProgressBar.stories-Dg9lHho7.js";import{r as i}from"./index-DJO9vBfz.js";import{S as D}from"./Slot-KSIKTLFF.js";import"./Draggable-B7pOjmDM.js";import{L as E}from"./LotPicker-CcjNBFbh.js";import"./Lot-CzPNOV6v.js";import{L as N}from"./LotPalette-B9KzEXUe.js";import{D as P,S as L}from"./context-DDGWZyhU.js";import"./clsx-B-dksMZM.js";import"./redux-toolkit.modern-DEr0YuQG.js";import"./_arrayLikeKeys-CtZSz9VC.js";import"./proxy-Bu-Muats.js";import"./use-animate-fs2rhT79.js";const k=()=>{const[t,o]=i.useState(new Map),s=i.useCallback((r,m)=>{o(f=>{const n=new Map(f);return m?n.set(r,m):n.delete(r),n})},[]),l=i.useMemo(()=>Array.from(t.values()),[t]);return{registerSlot:s,slotRefs:l,slotRefMap:t}},A=({slots:t})=>e.jsx("div",{children:t.map((o,s)=>e.jsx("div",{className:"flex",children:o.map((l,r)=>i.createElement(D,{...l,key:`${s}-${r}`}))},s))});A.__docgenInfo={description:"",methods:[],displayName:"Area",props:{slots:{required:!0,tsType:{name:"Array",elements:[{name:"Array",elements:[{name:"SlotModel"}],raw:"SlotModel[]"}],raw:"SlotModel[][]"},description:""}}};const y=()=>{const t=v(),o=i.useRef(null),{slotRefs:s,registerSlot:l}=k(),r=R(u=>u.AreaTiles.slots),[m,f]=i.useState(6),n=(u,{point:c})=>{if(!s.length)return!1;const x=s.find(a=>{const p=a.getBoundingClientRect();if(c.x>=p.left&&c.x<=p.right&&c.y>=p.top&&c.y<=p.bottom)return a});if(!x)return!1;const g=r.flat().find(a=>a.id===x.id);return g?(t(M.placeLot({slotId:g.id,lotId:"lot"})),f(a=>a-1),!0):!1};return e.jsx(P.Provider,{value:{dragConstraints:o,onDragEnd:n},children:e.jsxs("div",{className:"mx-8 my-20 flex flex-1 items-center justify-center self-stretch",ref:o,children:[e.jsx(L.Provider,{value:{registerSlot:l},children:e.jsx(A,{slots:r})}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:e.jsx(N,{children:e.jsx(E,{count:m})})})]})})};y.__docgenInfo={description:"",methods:[],displayName:"AreaTiles"};const ne={title:"AreaTiles/AreaTiles",component:y,tags:["!autodocs"],decorators:t=>e.jsx(T,{store:_({tutor:{styles:{background:{src:"/areatiles-bg.jpg"}}}}),children:e.jsx("div",{className:"h-[657px] w-[1280px] shadow-2xl",children:e.jsx(b,{chat:{messages:w.args.messages},progressBar:C.args,children:e.jsx(t,{})})})})},d={};var h,j,S;d.parameters={...d.parameters,docs:{...(h=d.parameters)==null?void 0:h.docs,source:{originalSource:"{}",...(S=(j=d.parameters)==null?void 0:j.docs)==null?void 0:S.source}}};const me=["AreaTiles"];export{d as AreaTiles,me as __namedExportsOrder,ne as default};

import{r as s}from"./index-DRjF_FHU.js";function i(r){const a=new Set;return Object.values(r).forEach(e=>{if(e.type==="comics"&&e.slides&&e.slides.forEach(o=>{o.image&&a.add(o.image)}),e.type==="sticker"&&e.url&&a.add(e.url),e.type==="showMeme"&&e.url&&a.add(e.url),e.type==="attachInteractive"&&e.props){const o=e.props;typeof o.backgroundImage=="string"&&a.add(o.backgroundImage)}}),Array.from(a)}const l=new Set;function d(r=[],a=!0){const e=s.useRef([]);s.useEffect(()=>{if(!a||r.length===0)return;const o=r.filter(t=>!l.has(t));if(o.length===0){console.log(`🖼️ All ${r.length} images already preloaded, skipping`);return}const n=o.map(t=>{const c=document.createElement("link");return c.rel="preload",c.as="image",c.href=t,c}),u=document.head;return n.forEach(t=>{u.appendChild(t)}),o.forEach(t=>l.add(t)),e.current=n,console.log(`🖼️ Preloading ${o.length} new images (${r.length-o.length} already cached):`,o),()=>{e.current.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),e.current=[]}},[r,a])}function p(r={},a=!0){const e=Object.values(r);d(e,a)}function g(r=null,a=!0){const e=r?i(r):[];d(e,a)}export{g as a,p as u};

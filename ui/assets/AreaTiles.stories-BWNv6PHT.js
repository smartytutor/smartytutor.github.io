import{j as e}from"./jsx-runtime-CkxqCPlQ.js";import{u as v,a as R,b as M,P as b,p as T,U as _}from"./UI-zfq67HMr.js";import"./Action-DcFBsC7h.js";import"./Answer-BBzPdijR.js";import"./Button-BFim8KLb.js";import"./Chat-DbB_edh2.js";import"./Icon-CA65L85m.js";import"./Input-CtlMo02g.js";import"./Menu-C_SWLeMl.js";import"./Message-B84R2Yj4.js";import"./ProgressBar-DvhAnra0.js";import"./Smartik-rCPOZ_vc.js";import w from"./Chat.stories-mvVQXxcb.js";import{Default as D}from"./ProgressBar.stories-Dg9lHho7.js";import{r as i}from"./index-DJO9vBfz.js";import{S as L}from"./Slot-7BjfcZ49.js";import"./Draggable-B7pOjmDM.js";import{L as C}from"./LotPicker-B688_aQh.js";import"./Lot-DD1NbmHj.js";import{L as E}from"./LotPalette-B9KzEXUe.js";import{D as N,S as P}from"./context-DDGWZyhU.js";import"./clsx-B-dksMZM.js";import"./redux-toolkit.modern-DEr0YuQG.js";import"./_arrayLikeKeys-CtZSz9VC.js";import"./proxy-Bu-Muats.js";import"./use-animate-fs2rhT79.js";const k=""+new URL("bg-D4XBaLZf.jpg",import.meta.url).href,I=()=>{const[t,o]=i.useState(new Map),r=i.useCallback((s,m)=>{o(f=>{const n=new Map(f);return m?n.set(s,m):n.delete(s),n})},[]),l=i.useMemo(()=>Array.from(t.values()),[t]);return{registerSlot:r,slotRefs:l,slotRefMap:t}},A=({slots:t})=>e.jsx("div",{children:t.map((o,r)=>e.jsx("div",{className:"flex",children:o.map((l,s)=>i.createElement(L,{...l,key:`${r}-${s}`}))},r))});A.__docgenInfo={description:"",methods:[],displayName:"Area",props:{slots:{required:!0,tsType:{name:"Array",elements:[{name:"Array",elements:[{name:"SlotModel"}],raw:"SlotModel[]"}],raw:"SlotModel[][]"},description:""}}};const y=()=>{const t=v(),o=i.useRef(null),{slotRefs:r,registerSlot:l}=I(),s=R(u=>u.AreaTiles.slots),[m,f]=i.useState(6),n=(u,{point:c})=>{if(!r.length)return!1;const x=r.find(a=>{const p=a.getBoundingClientRect();if(c.x>=p.left&&c.x<=p.right&&c.y>=p.top&&c.y<=p.bottom)return a});if(!x)return!1;const g=s.flat().find(a=>a.id===x.id);return g?(t(M.placeLot({slotId:g.id,lotId:"lot"})),f(a=>a-1),!0):!1};return e.jsx(N.Provider,{value:{dragConstraints:o,onDragEnd:n},children:e.jsxs("div",{className:"mx-8 my-20 flex flex-1 items-center justify-center self-stretch",ref:o,children:[e.jsx(P.Provider,{value:{registerSlot:l},children:e.jsx(A,{slots:s})}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:e.jsx(E,{children:e.jsx(C,{count:m})})})]})})};y.__docgenInfo={description:"",methods:[],displayName:"AreaTiles"};const me={title:"AreaTiles/AreaTiles",component:y,tags:["!autodocs"],decorators:t=>e.jsx(b,{store:T({tutor:{styles:{background:{src:k}}}}),children:e.jsx("div",{className:"h-[657px] w-[1280px] shadow-2xl",children:e.jsx(_,{chat:{messages:w.args.messages},progressBar:D.args,children:e.jsx(t,{})})})})},d={};var h,j,S;d.parameters={...d.parameters,docs:{...(h=d.parameters)==null?void 0:h.docs,source:{originalSource:"{}",...(S=(j=d.parameters)==null?void 0:j.docs)==null?void 0:S.source}}};const ce=["AreaTiles"];export{d as AreaTiles,ce as __namedExportsOrder,me as default};
